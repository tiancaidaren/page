<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OKX é‡åŒ–äº¤æ˜“ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f5f5;
            color: #333;
        }

        .container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 200px;
            background: #2c3e50;
            color: white;
            padding: 20px 0;
            flex-shrink: 0;
        }

        .logo {
            padding: 0 20px 30px;
            font-size: 20px;
            font-weight: bold;
            border-bottom: 1px solid #34495e;
        }

        .nav-item {
            padding: 15px 20px;
            cursor: pointer;
            transition: background 0.3s;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: #34495e;
        }

        .nav-item.active {
            background: #34495e;
            border-left-color: #3498db;
        }

        /* ä¸»å†…å®¹åŒº */
        .main-content {
            flex: 1;
            overflow-y: auto;
            background: white;
        }

        /* å³ä¾§æ—¥å¿—æ  */
        .info-panel {
            width: 400px;
            background: #ecf0f1;
            padding: 20px;
            overflow-y: auto;
            flex-shrink: 0;
        }

        /* é¡µé¢å†…å®¹ */
        .page {
            display: none;
            padding: 30px;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
        }

        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 12px;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card:nth-child(2) {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .stat-card:nth-child(3) {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .stat-card:nth-child(4) {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .stat-label {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
        }

        .stat-change {
            font-size: 12px;
            margin-top: 5px;
            opacity: 0.8;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-small {
            padding: 5px 12px;
            font-size: 12px;
        }

        /* ç­–ç•¥è¡¨æ ¼ */
        .strategy-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .strategy-table th,
        .strategy-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        .strategy-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
        }

        .strategy-table tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-running {
            background: #d4edda;
            color: #155724;
        }

        .status-stopped {
            background: #f8d7da;
            color: #721c24;
        }

        .account-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            background: #e3f2fd;
            color: #1976d2;
        }

        /* æ—¥å¿—é¢æ¿ */
        .log-panel {
            height: 100%;
        }

        .log-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .log-container {
            background: white;
            border-radius: 4px;
            padding: 15px;
            height: calc(100% - 40px);
            overflow-y: auto;
        }

        .log-entry {
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 4px;
            background: #f8f9fa;
            font-size: 13px;
            line-height: 1.6;
            border-left: 3px solid #3498db;
        }

        .log-entry.success {
            border-left-color: #27ae60;
            background: #d4edda;
        }

        .log-entry.warning {
            border-left-color: #f39c12;
            background: #fff3cd;
        }

        .log-entry.error {
            border-left-color: #e74c3c;
            background: #f8d7da;
        }

        .log-time {
            color: #7f8c8d;
            font-size: 11px;
            margin-bottom: 4px;
        }

        .log-strategy {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 3px;
        }

        .log-message {
            color: #555;
        }

        .log-details {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(0,0,0,0.1);
            font-size: 12px;
            color: #666;
        }

        .log-detail-item {
            display: inline-block;
            margin-right: 15px;
        }

        .log-detail-label {
            color: #7f8c8d;
            margin-right: 4px;
        }

        /* æ‰§è¡Œè®°å½•è¡¨æ ¼ */
        .execution-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            margin-top: 20px;
        }

        .execution-table th {
            background: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .execution-table td {
            padding: 12px;
            border-bottom: 1px solid #ecf0f1;
        }

        .execution-table tr:hover {
            background: #f8f9fa;
        }

        .direction-long {
            color: #27ae60;
            font-weight: 600;
        }

        .direction-short {
            color: #e74c3c;
            font-weight: 600;
        }

        .pnl-profit {
            color: #27ae60;
            font-weight: 600;
        }

        .pnl-loss {
            color: #e74c3c;
            font-weight: 600;
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: #3498db;
        }

        /* ç­–ç•¥é…ç½®åŒºåŸŸ */
        .strategy-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        .signal-item {
            background: white;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
        }

        .signal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ecf0f1;
        }

        .signal-number {
            font-weight: 600;
            color: #3498db;
        }

        .signal-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .signal-field {
            display: flex;
            flex-direction: column;
        }

        .field-label {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .radio-group {
            display: flex;
            gap: 20px;
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }

        /* APIé…ç½® */
        .api-config {
            max-width: 600px;
        }

        .connection-status {
            margin-top: 15px;
            padding: 12px;
            border-radius: 4px;
            display: none;
        }

        .connection-status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .connection-status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .input-group {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .input-addon {
            padding: 10px;
            background: #ecf0f1;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #7f8c8d;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state-text {
            font-size: 16px;
        }

        /* ç­›é€‰æ  */
        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .filter-item {
            flex: 1;
        }

        /* è´¦å·ç®¡ç†ç›¸å…³æ ·å¼ */
        .account-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            position: relative;
        }

        .account-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
        }

        .account-name {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .account-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }

        .account-info-item {
            display: flex;
            flex-direction: column;
        }

        .account-info-label {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .account-info-value {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
        }

        .account-actions {
            display: flex;
            gap: 10px;
        }

        .account-status-active {
            color: #27ae60;
            font-weight: 600;
        }

        .account-status-inactive {
            color: #e74c3c;
            font-weight: 600;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1400px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .sidebar {
                width: 60px;
            }

            .sidebar .logo,
            .nav-item span {
                display: none;
            }

            .nav-item {
                text-align: center;
                padding: 15px 5px;
            }

            .info-panel {
                width: 300px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .account-info {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: auto;
                padding: 10px 0;
            }

            .sidebar .logo {
                display: block;
                text-align: center;
                padding: 10px;
            }

            .nav-item {
                display: inline-block;
                width: auto;
                padding: 10px 15px;
            }

            .info-panel {
                width: 100%;
                max-height: 400px;
            }

            .signal-row {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .filter-bar {
                flex-direction: column;
            }

            .account-info {
                grid-template-columns: 1fr;
            }
        }

        /* å¤é€‰æ¡†ç»„æ ·å¼ */
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            font-size: 14px;
        }

        .checkbox-label input {
            width: auto;
            height: auto;
            margin: 0;
        }
    </style>
</head>
<body>
<div class="container">
    <!-- å·¦ä¾§å¯¼èˆªæ  -->
    <div class="sidebar">
        <div class="logo">OKX é‡åŒ–</div>
        <div class="nav-item active" onclick="switchPage('dashboard')">
            <span>ğŸ“Š ä¸»é¡µé¢</span>
        </div>
        <div class="nav-item" onclick="switchPage('executions')">
            <span>ğŸ“ˆ æ‰§è¡Œè®°å½•</span>
        </div>
        <div class="nav-item" onclick="switchPage('accounts')">
            <span>ğŸ‘¤ è´¦å·ç®¡ç†</span>
        </div>
        <div class="nav-item" onclick="switchPage('settings')">
            <span>âš™ï¸ è®¾ç½®</span>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-content">
        <!-- ä¸»é¡µé¢ -->
        <div id="dashboard" class="page active">
            <div class="page-header">
                <h1 class="page-title">ç­–ç•¥ç®¡ç†</h1>
            </div>

            <!-- ç»Ÿè®¡æ•°æ® -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">ä»Šæ—¥äº¤æ˜“æ¬¡æ•°</div>
                    <div class="stat-value" id="totalTrades">12</div>
                    <div class="stat-change">è¾ƒæ˜¨æ—¥ +3</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ä»Šæ—¥ç›ˆäº</div>
                    <div class="stat-value" id="totalPnl">+$245.80</div>
                    <div class="stat-change">æ”¶ç›Šç‡ +2.46%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">èƒœç‡</div>
                    <div class="stat-value" id="winRate">66.7%</div>
                    <div class="stat-change">8èƒœ 4è´Ÿ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">æŒä»“ä¸­</div>
                    <div class="stat-value" id="openPositions">3</div>
                    <div class="stat-change">æµ®åŠ¨ç›ˆäº +$45.20</div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="switchPage('strategy-config')">+ æ–°å»ºç­–ç•¥</button>

            <table class="strategy-table">
                <thead>
                <tr>
                    <th>ç­–ç•¥åç§°</th>
                    <th>å…³è”è´¦å·</th>
                    <th>è¿›æ”»ç­–ç•¥çŠ¶æ€</th>
                    <th>é˜²å®ˆç­–ç•¥çŠ¶æ€</th>
                    <th>åˆ›å»ºæ—¶é—´</th>
                    <th>æ“ä½œ</th>
                </tr>
                </thead>
                <tbody id="strategyList">
                <tr>
                    <td>BTC-SAR-çªç ´ç­–ç•¥</td>
                    <td><span class="account-badge">ä¸»è´¦å·</span></td>
                    <td><span class="status-badge status-running">è¿è¡Œä¸­</span></td>
                    <td><span class="status-badge status-stopped">å·²åœæ­¢</span></td>
                    <td>2025-10-08 14:30</td>
                    <td>
                        <button class="btn btn-small btn-success" onclick="simulateStrategyTrigger('BTC-SAR-çªç ´ç­–ç•¥', 'attack', 'ä¸»è´¦å·')">æ¨¡æ‹Ÿè§¦å‘</button>
                        <button class="btn btn-small btn-secondary">ç¼–è¾‘</button>
                        <button class="btn btn-small btn-danger">åˆ é™¤</button>
                    </td>
                </tr>
                <tr>
                    <td>ETH-å‘¨æœŸæå€¼ç­–ç•¥</td>
                    <td><span class="account-badge">å¤‡ç”¨è´¦å·</span></td>
                    <td><span class="status-badge status-running">è¿è¡Œä¸­</span></td>
                    <td><span class="status-badge status-running">è¿è¡Œä¸­</span></td>
                    <td>2025-10-07 09:15</td>
                    <td>
                        <button class="btn btn-small btn-success" onclick="simulateStrategyTrigger('ETH-å‘¨æœŸæå€¼ç­–ç•¥', 'defense', 'å¤‡ç”¨è´¦å·')">æ¨¡æ‹Ÿè§¦å‘</button>
                        <button class="btn btn-small btn-secondary">ç¼–è¾‘</button>
                        <button class="btn btn-small btn-danger">åˆ é™¤</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- æ‰§è¡Œè®°å½•é¡µé¢ -->
        <div id="executions" class="page">
            <div class="page-header">
                <h1 class="page-title">æ‰§è¡Œè®°å½•</h1>
            </div>

            <!-- ç­›é€‰æ  -->
            <div class="filter-bar">
                <div class="filter-item">
                    <label class="form-label">è´¦å·ç­›é€‰</label>
                    <select class="form-select">
                        <option>å…¨éƒ¨è´¦å·</option>
                        <option>ä¸»è´¦å·</option>
                        <option>å¤‡ç”¨è´¦å·</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label class="form-label">ç­–ç•¥ç­›é€‰</label>
                    <select class="form-select">
                        <option>å…¨éƒ¨ç­–ç•¥</option>
                        <option>BTC-SAR-çªç ´ç­–ç•¥</option>
                        <option>ETH-å‘¨æœŸæå€¼ç­–ç•¥</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label class="form-label">äº¤æ˜“æ–¹å‘</label>
                    <select class="form-select">
                        <option>å…¨éƒ¨</option>
                        <option>å¼€å¤š</option>
                        <option>å¼€ç©º</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label class="form-label">æ—¶é—´èŒƒå›´</label>
                    <select class="form-select">
                        <option>ä»Šæ—¥</option>
                        <option>è¿‘3å¤©</option>
                        <option>è¿‘7å¤©</option>
                        <option>è¿‘30å¤©</option>
                    </select>
                </div>
            </div>

            <!-- æ‰§è¡Œè®°å½•è¡¨æ ¼ -->
            <div style="overflow-x: auto;">
                <table class="execution-table">
                    <thead>
                    <tr>
                        <th>æ—¶é—´</th>
                        <th>è´¦å·</th>
                        <th>ç­–ç•¥åç§°</th>
                        <th>ç­–ç•¥ç±»å‹</th>
                        <th>äº¤æ˜“å¯¹</th>
                        <th>æ–¹å‘</th>
                        <th>æ•°é‡</th>
                        <th>å¼€ä»“ä»·æ ¼</th>
                        <th>å¹³ä»“ä»·æ ¼</th>
                        <th>ç›ˆäº</th>
                        <th>å¤‡æ³¨</th>
                    </tr>
                    </thead>
                    <tbody id="executionTableBody">
                    <tr>
                        <td>10:24:12</td>
                        <td><span class="account-badge">ä¸»è´¦å·</span></td>
                        <td>BTC-SAR-çªç ´ç­–ç•¥</td>
                        <td>è¿›æ”»</td>
                        <td>BTC-USDT</td>
                        <td class="direction-long">å¼€å¤š</td>
                        <td>0.05</td>
                        <td>$28,450</td>
                        <td>$28,906</td>
                        <td class="pnl-profit">+$45.30</td>
                        <td>SARä¸Šç©¿è§¦å‘</td>
                    </tr>
                    <tr>
                        <td>10:18:35</td>
                        <td><span class="account-badge">å¤‡ç”¨è´¦å·</span></td>
                        <td>ETH-å‘¨æœŸæå€¼ç­–ç•¥</td>
                        <td>é˜²å®ˆ</td>
                        <td>ETH-USDT</td>
                        <td class="direction-short">å¼€ç©º</td>
                        <td>2.5</td>
                        <td>$1,845</td>
                        <td>$1,840</td>
                        <td class="pnl-loss">-$12.50</td>
                        <td>æ­¢æŸé€€å‡º</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div id="noExecutions" class="empty-state" style="display: none;">
                <div class="empty-state-icon">ğŸ“Š</div>
                <div class="empty-state-text">æš‚æ— æ‰§è¡Œè®°å½•</div>
            </div>
        </div>

        <!-- è´¦å·ç®¡ç†é¡µé¢ -->
        <div id="accounts" class="page">
            <div class="page-header">
                <h1 class="page-title">è´¦å·ç®¡ç†</h1>
            </div>

            <button class="btn btn-primary" onclick="showAddAccountForm()" style="margin-bottom: 20px;">+ æ·»åŠ æ–°è´¦å·</button>

            <div id="accountList">
                <!-- è´¦å·å¡ç‰‡ 1 -->
                <div class="account-card">
                    <div class="account-header">
                        <div class="account-name">ä¸»è´¦å·</div>
                        <div class="account-actions">
                            <button class="btn btn-small btn-secondary">ç¼–è¾‘</button>
                            <button class="btn btn-small btn-danger">åˆ é™¤</button>
                        </div>
                    </div>
                    <div class="account-info">
                        <div class="account-info-item">
                            <div class="account-info-label">API Key</div>
                            <div class="account-info-value">****-****-****-a1b2</div>
                        </div>
                        <div class="account-info-item">
                            <div class="account-info-label">çŠ¶æ€</div>
                            <div class="account-info-value account-status-active">âœ“ å·²è¿æ¥</div>
                        </div>
                        <div class="account-info-item">
                            <div class="account-info-label">åˆ›å»ºæ—¶é—´</div>
                            <div class="account-info-value">2025-10-01 10:30</div>
                        </div>
                    </div>
                    <div class="account-info">
                        <div class="account-info-item">
                            <div class="account-info-label">å…³è”ç­–ç•¥æ•°</div>
                            <div class="account-info-value">2 ä¸ª</div>
                        </div>
                        <div class="account-info-item">
                            <div class="account-info-label">ä»Šæ—¥äº¤æ˜“</div>
                            <div class="account-info-value">8 ç¬”</div>
                        </div>
                        <div class="account-info-item">
                            <div class="account-info-label">ä»Šæ—¥ç›ˆäº</div>
                            <div class="account-info-value pnl-profit">+$156.20</div>
                        </div>
                    </div>
                </div>

                <!-- è´¦å·å¡ç‰‡ 2 -->
                <div class="account-card">
                    <div class="account-header">
                        <div class="account-name">å¤‡ç”¨è´¦å·</div>
                        <div class="account-actions">
                            <button class="btn btn-small btn-secondary">ç¼–è¾‘</button>
                            <button class="btn btn-small btn-danger">åˆ é™¤</button>
                        </div>
                    </div>
                    <div class="account-info">
                        <div class="account-info-item">
                            <div class="account-info-label">API Key</div>
                            <div class="account-info-value">****-****-****-c3d4</div>
                        </div>
                        <div class="account-info-item">
                            <div class="account-info-label">çŠ¶æ€</div>
                            <div class="account-info-value account-status-active">âœ“ å·²è¿æ¥</div>
                        </div>
                        <div class="account-info-item">
                            <div class="account-info-label">åˆ›å»ºæ—¶é—´</div>
                            <div class="account-info-value">2025-10-05 14:20</div>
                        </div>
                    </div>
                    <div class="account-info">
                        <div class="account-info-item">
                            <div class="account-info-label">å…³è”ç­–ç•¥æ•°</div>
                            <div class="account-info-value">1 ä¸ª</div>
                        </div>
                        <div class="account-info-item">
                            <div class="account-info-label">ä»Šæ—¥äº¤æ˜“</div>
                            <div class="account-info-value">4 ç¬”</div>
                        </div>
                        <div class="account-info-item">
                            <div class="account-info-label">ä»Šæ—¥ç›ˆäº</div>
                            <div class="account-info-value pnl-profit">+$89.60</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ·»åŠ è´¦å·è¡¨å•ï¼ˆé»˜è®¤éšè—ï¼‰ -->
            <div id="addAccountForm" style="display: none;">
                <div class="strategy-section">
                    <h2 class="section-title">æ·»åŠ æ–°è´¦å·</h2>

                    <div class="form-group">
                        <label class="form-label">è´¦å·åˆ«å</label>
                        <input type="text" class="form-input" id="newAccountName" placeholder="ä¾‹å¦‚ï¼šä¸»è´¦å·ã€å¤‡ç”¨è´¦å·">
                    </div>

                    <div class="form-group">
                        <label class="form-label">API Key</label>
                        <input type="text" class="form-input" id="newAccountApiKey" placeholder="è¯·è¾“å…¥ API Key">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Secret Key</label>
                        <input type="password" class="form-input" id="newAccountSecretKey" placeholder="è¯·è¾“å…¥ Secret Key">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Passphrase</label>
                        <input type="password" class="form-input" id="newAccountPassphrase" placeholder="è¯·è¾“å…¥ Passphrase">
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="testNewAccountConnection()">æµ‹è¯•è¿æ¥</button>
                        <button class="btn btn-success" onclick="saveNewAccount()">ä¿å­˜è´¦å·</button>
                        <button class="btn btn-secondary" onclick="hideAddAccountForm()">å–æ¶ˆ</button>
                    </div>

                    <div id="newAccountStatus" class="connection-status"></div>
                </div>
            </div>
        </div>

        <!-- ç­–ç•¥é…ç½®é¡µé¢ -->
        <div id="strategy-config" class="page">
            <div class="page-header">
                <h1 class="page-title">ç­–ç•¥é…ç½®</h1>
            </div>

            <div class="form-group">
                <label class="form-label">ç­–ç•¥åç§°</label>
                <input type="text" class="form-input" placeholder="è¯·è¾“å…¥ç­–ç•¥åç§°">
            </div>

            <div class="form-group">
                <label class="form-label">å…³è”è´¦å·</label>
                <div id="strategyAccountList" class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" name="strategyAccount" value="ä¸»è´¦å·">
                        <span>ä¸»è´¦å·</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="strategyAccount" value="å¤‡ç”¨è´¦å·">
                        <span>å¤‡ç”¨è´¦å·</span>
                    </label>
                </div>
            </div>

            <!-- è¿›æ”»ç­–ç•¥é…ç½® -->
            <div class="strategy-section">
                <h2 class="section-title">ğŸ¯ è¿›æ”»ç­–ç•¥é…ç½®</h2>

                <div class="form-group">
                    <label class="form-label">Kçº¿å‘¨æœŸ</label>
                    <select class="form-select">
                        <option>1åˆ†é’Ÿ</option>
                        <option>5åˆ†é’Ÿ</option>
                        <option>15åˆ†é’Ÿ</option>
                        <option>30åˆ†é’Ÿ</option>
                        <option>1å°æ—¶</option>
                        <option>4å°æ—¶</option>
                        <option>1å¤©</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">ä¿¡å·é‡ç»„åˆ (æ‰€æœ‰æ¡ä»¶éœ€åŒæ—¶æ»¡è¶³)</label>
                    <div id="attackSignals">
                        <!-- ä¿¡å·é‡å°†é€šè¿‡ JS åŠ¨æ€æ·»åŠ  -->
                    </div>
                    <button class="btn btn-secondary" style="margin-top: 10px;" onclick="addSignal('attackSignals')">+ æ·»åŠ ä¿¡å·é‡</button>
                </div>

                <div class="form-group">
                    <label class="form-label">å¼€ä»“æ–¹å‘</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="attackDirection" value="long" checked>
                            <span>å¼€å¤š</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="attackDirection" value="short">
                            <span>å¼€ç©º</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ä»“ä½ç®¡ç†</label>
                    <select class="form-select" id="attackPositionFormula" onchange="updatePositionParams('attack')">
                        <option value="kelly">å‡¯åˆ©å…¬å¼</option>
                        <option value="fixed-ratio">å›ºå®šæ¯”ä¾‹</option>
                        <option value="fixed-amount">å›ºå®šé‡‘é¢</option>
                        <option value="atr">ATRåŠ¨æ€ä»“ä½</option>
                    </select>
                </div>

                <div class="form-group" id="attackPositionParams">
                    <label class="form-label">ä»“ä½å‚æ•°</label>
                    <div class="signal-row">
                        <div class="signal-field">
                            <span class="field-label">èƒœç‡ (0-1)</span>
                            <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 0.6" step="0.01" min="0" max="1">
                        </div>
                        <div class="signal-field">
                            <span class="field-label">ç›ˆäºæ¯”</span>
                            <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 2" step="0.1" min="0">
                        </div>
                    </div>
                </div>
            </div>

            <!-- é˜²å®ˆç­–ç•¥é…ç½® -->
            <div class="strategy-section">
                <h2 class="section-title">ğŸ›¡ï¸ é˜²å®ˆç­–ç•¥é…ç½®</h2>

                <div class="form-group">
                    <label class="form-label">Kçº¿å‘¨æœŸ</label>
                    <select class="form-select">
                        <option>1åˆ†é’Ÿ</option>
                        <option selected>5åˆ†é’Ÿ</option>
                        <option>15åˆ†é’Ÿ</option>
                        <option>30åˆ†é’Ÿ</option>
                        <option>1å°æ—¶</option>
                        <option>4å°æ—¶</option>
                        <option>1å¤©</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">ä¿¡å·é‡ç»„åˆ (æ‰€æœ‰æ¡ä»¶éœ€åŒæ—¶æ»¡è¶³)</label>
                    <div id="defenseSignals">
                        <!-- ä¿¡å·é‡å°†é€šè¿‡ JS åŠ¨æ€æ·»åŠ  -->
                    </div>
                    <button class="btn btn-secondary" style="margin-top: 10px;" onclick="addSignal('defenseSignals')">+ æ·»åŠ ä¿¡å·é‡</button>
                </div>

                <div class="form-group">
                    <label class="form-label">å¼€ä»“æ–¹å‘</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="defenseDirection" value="long">
                            <span>å¼€å¤š</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="defenseDirection" value="short" checked>
                            <span>å¼€ç©º</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ä»“ä½ç®¡ç†</label>
                    <select class="form-select" id="defensePositionFormula" onchange="updatePositionParams('defense')">
                        <option value="kelly">å‡¯åˆ©å…¬å¼</option>
                        <option value="fixed-ratio">å›ºå®šæ¯”ä¾‹</option>
                        <option value="fixed-amount">å›ºå®šé‡‘é¢</option>
                        <option value="atr">ATRåŠ¨æ€ä»“ä½</option>
                    </select>
                </div>

                <div class="form-group" id="defensePositionParams">
                    <label class="form-label">ä»“ä½å‚æ•°</label>
                    <div class="signal-row">
                        <div class="signal-field">
                            <span class="field-label">èƒœç‡ (0-1)</span>
                            <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 0.55" step="0.01" min="0" max="1">
                        </div>
                        <div class="signal-field">
                            <span class="field-label">ç›ˆäºæ¯”</span>
                            <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 1.5" step="0.1" min="0">
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="saveStrategy()">ä¿å­˜ç­–ç•¥</button>
                <button class="btn btn-secondary" onclick="switchPage('dashboard')">å–æ¶ˆ</button>
            </div>
        </div>

        <!-- è®¾ç½®é¡µé¢ -->
        <div id="settings" class="page">
            <div class="page-header">
                <h1 class="page-title">ç³»ç»Ÿè®¾ç½®</h1>
            </div>

            <div class="strategy-section">
                <h2 class="section-title">é€šç”¨è®¾ç½®</h2>

                <div class="form-group">
                    <label class="form-label">é»˜è®¤è´¦å·</label>
                    <select class="form-select">
                        <option>ä¸»è´¦å·</option>
                        <option>å¤‡ç”¨è´¦å·</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">é£é™©æ§åˆ¶</label>
                    <div class="signal-row">
                        <div class="signal-field">
                            <span class="field-label">å•æ—¥æœ€å¤§äº¤æ˜“æ¬¡æ•°</span>
                            <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 20" min="1">
                        </div>
                        <div class="signal-field">
                            <span class="field-label">å•æ—¥æœ€å¤§äºæŸ (USDT)</span>
                            <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 500" min="0">
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-success" onclick="saveSettings()">ä¿å­˜è®¾ç½®</button>
                </div>
            </div>
        </div>
    </div>

    <!-- å³ä¾§æ—¥å¿—æ  -->
    <div class="info-panel">
        <div class="log-panel">
            <h3 class="log-title">å®æ—¶äº¤æ˜“æ—¥å¿—</h3>
            <div class="log-container" id="logContainer">
                <div class="log-entry success">
                    <div class="log-time">2025-10-09 10:23:45</div>
                    <div class="log-strategy">ä¸»è´¦å· Â· BTC-SAR-çªç ´ç­–ç•¥ Â· è¿›æ”»</div>
                    <div class="log-message">âœ… ä¿¡å·è§¦å‘: SARä¸Šç©¿ + RSI > 70</div>
                </div>
                <div class="log-entry success">
                    <div class="log-time">2025-10-09 10:23:47</div>
                    <div class="log-strategy">ä¸»è´¦å· Â· BTC-SAR-çªç ´ç­–ç•¥ Â· è¿›æ”»</div>
                    <div class="log-message">ğŸ“Š ä¸‹å•æˆåŠŸ</div>
                    <div class="log-details">
                            <span class="log-detail-item">
                                <span class="log-detail-label">äº¤æ˜“å¯¹:</span>
                                <span>BTC-USDT</span>
                            </span>
                        <span class="log-detail-item">
                                <span class="log-detail-label">æ–¹å‘:</span>
                                <span class="direction-long">å¼€å¤š</span>
                            </span>
                        <span class="log-detail-item">
                                <span class="log-detail-label">æ•°é‡:</span>
                                <span>0.05 BTC</span>
                            </span>
                    </div>
                </div>
                <div class="log-entry success">
                    <div class="log-time">2025-10-09 10:24:12</div>
                    <div class="log-strategy">ä¸»è´¦å· Â· BTC-SAR-çªç ´ç­–ç•¥ Â· è¿›æ”»</div>
                    <div class="log-message">ğŸ’° è®¢å•æˆäº¤</div>
                    <div class="log-details">
                            <span class="log-detail-item">
                                <span class="log-detail-label">æˆäº¤ä»·:</span>
                                <span>$28,450</span>
                            </span>
                        <span class="log-detail-item">
                                <span class="log-detail-label">æˆäº¤é¢:</span>
                                <span>$1,422.50</span>
                            </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // è´¦å·æ•°æ®å­˜å‚¨
    let accounts = [
        { name: 'ä¸»è´¦å·', apiKey: '****-****-****-a1b2', status: 'active' },
        { name: 'å¤‡ç”¨è´¦å·', apiKey: '****-****-****-c3d4', status: 'active' }
    ];

    // ä¿¡å·é‡è®¡æ•°å™¨
    let signalCounters = {
        attackSignals: 0,
        defenseSignals: 0
    };

    // ä¿¡å·é‡é…ç½®æ¨¡æ¿
    const signalTemplates = {
        'sar': {
            name: 'SAR (æŠ›ç‰©çº¿)',
            fields: [
                { name: 'condition', label: 'æ¡ä»¶', type: 'select', options: ['ä»·æ ¼ä¸Šç©¿', 'ä»·æ ¼ä¸‹ç©¿'] },
                { name: 'af', label: 'åŠ é€Ÿå› å­', type: 'number', placeholder: '0.02', step: '0.01' },
                { name: 'maxaf', label: 'æœ€å¤§åŠ é€Ÿå› å­', type: 'number', placeholder: '0.2', step: '0.01' }
            ]
        },
        'period-high': {
            name: 'å‘¨æœŸå†…æœ€é«˜ç‚¹',
            fields: [
                { name: 'period', label: 'æ—¶é—´çª—å£', type: 'number-unit', placeholder: '24', unit: 'å°æ—¶' },
                { name: 'condition', label: 'æ¡ä»¶', type: 'select', options: ['ä»·æ ¼çªç ´', 'ä»·æ ¼å›è½'] }
            ]
        },
        'period-low': {
            name: 'å‘¨æœŸå†…æœ€ä½ç‚¹',
            fields: [
                { name: 'period', label: 'æ—¶é—´çª—å£', type: 'number-unit', placeholder: '24', unit: 'å°æ—¶' },
                { name: 'condition', label: 'æ¡ä»¶', type: 'select', options: ['ä»·æ ¼çªç ´', 'ä»·æ ¼å›è½'] }
            ]
        },
        'macd': {
            name: 'MACD',
            fields: [
                { name: 'condition', label: 'æ¡ä»¶', type: 'select', options: ['é‡‘å‰', 'æ­»å‰', 'DIFä¸Šç©¿0è½´', 'DIFä¸‹ç©¿0è½´'] },
                { name: 'fast', label: 'å¿«çº¿å‘¨æœŸ', type: 'number', placeholder: '12' },
                { name: 'slow', label: 'æ…¢çº¿å‘¨æœŸ', type: 'number', placeholder: '26' },
                { name: 'signal', label: 'ä¿¡å·çº¿å‘¨æœŸ', type: 'number', placeholder: '9' }
            ]
        },
        'rsi': {
            name: 'RSI (ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡)',
            fields: [
                { name: 'condition', label: 'æ¡ä»¶', type: 'select', options: ['ä¸Šç©¿', 'ä¸‹ç©¿', 'å¤§äº', 'å°äº'] },
                { name: 'value', label: 'é˜ˆå€¼', type: 'number', placeholder: '70', min: '0', max: '100' },
                { name: 'period', label: 'å‘¨æœŸ', type: 'number', placeholder: '14' }
            ]
        },
        'ma': {
            name: 'ç§»åŠ¨å¹³å‡çº¿ (MA)',
            fields: [
                { name: 'type', label: 'ç±»å‹', type: 'select', options: ['ç®€å•ç§»åŠ¨å¹³å‡(SMA)', 'æŒ‡æ•°ç§»åŠ¨å¹³å‡(EMA)'] },
                { name: 'condition', label: 'æ¡ä»¶', type: 'select', options: ['ä»·æ ¼ä¸Šç©¿', 'ä»·æ ¼ä¸‹ç©¿', 'é‡‘å‰', 'æ­»å‰'] },
                { name: 'period1', label: 'å‘¨æœŸ1', type: 'number', placeholder: '5' },
                { name: 'period2', label: 'å‘¨æœŸ2 (é‡‘å‰/æ­»å‰)', type: 'number', placeholder: '20' }
            ]
        },
        'bollinger': {
            name: 'å¸ƒæ—å¸¦ (Bollinger Bands)',
            fields: [
                { name: 'condition', label: 'æ¡ä»¶', type: 'select', options: ['çªç ´ä¸Šè½¨', 'çªç ´ä¸‹è½¨', 'å›å½’ä¸­è½¨'] },
                { name: 'period', label: 'å‘¨æœŸ', type: 'number', placeholder: '20' },
                { name: 'std', label: 'æ ‡å‡†å·®å€æ•°', type: 'number', placeholder: '2', step: '0.1' }
            ]
        },
        'kdj': {
            name: 'KDJ æŒ‡æ ‡',
            fields: [
                { name: 'condition', label: 'æ¡ä»¶', type: 'select', options: ['é‡‘å‰', 'æ­»å‰', 'Kå€¼ä¸Šç©¿', 'Kå€¼ä¸‹ç©¿'] },
                { name: 'value', label: 'é˜ˆå€¼', type: 'number', placeholder: '80', min: '0', max: '100' },
                { name: 'period', label: 'å‘¨æœŸ', type: 'number', placeholder: '9' }
            ]
        }
    };

    // é¡µé¢åˆ‡æ¢
    function switchPage(pageId) {
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });

        document.getElementById(pageId).classList.add('active');

        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });

        const navItems = document.querySelectorAll('.nav-item');
        if (pageId === 'dashboard') {
            navItems[0].classList.add('active');
        } else if (pageId === 'executions') {
            navItems[1].classList.add('active');
        } else if (pageId === 'accounts') {
            navItems[2].classList.add('active');
        } else if (pageId === 'settings') {
            navItems[3].classList.add('active');
        }
    }

    // æ˜¾ç¤ºæ·»åŠ è´¦å·è¡¨å•
    function showAddAccountForm() {
        document.getElementById('addAccountForm').style.display = 'block';
        document.getElementById('accountList').style.display = 'none';
    }

    // éšè—æ·»åŠ è´¦å·è¡¨å•
    function hideAddAccountForm() {
        document.getElementById('addAccountForm').style.display = 'none';
        document.getElementById('accountList').style.display = 'block';
        // æ¸…ç©ºè¡¨å•
        document.getElementById('newAccountName').value = '';
        document.getElementById('newAccountApiKey').value = '';
        document.getElementById('newAccountSecretKey').value = '';
        document.getElementById('newAccountPassphrase').value = '';
        document.getElementById('newAccountStatus').style.display = 'none';
    }

    // æµ‹è¯•æ–°è´¦å·è¿æ¥
    function testNewAccountConnection() {
        const statusDiv = document.getElementById('newAccountStatus');
        statusDiv.style.display = 'block';
        statusDiv.className = 'connection-status';
        statusDiv.textContent = 'æ­£åœ¨æµ‹è¯•è¿æ¥...';

        setTimeout(() => {
            statusDiv.className = 'connection-status success';
            statusDiv.textContent = 'âœ… è¿æ¥æˆåŠŸ! API é…ç½®æœ‰æ•ˆ';
        }, 1500);
    }

    // ä¿å­˜æ–°è´¦å·
    function saveNewAccount() {
        const name = document.getElementById('newAccountName').value;
        const apiKey = document.getElementById('newAccountApiKey').value;

        if (!name || !apiKey) {
            alert('è¯·å¡«å†™è´¦å·åˆ«åå’ŒAPI Key');
            return;
        }

        alert('è´¦å·å·²ä¿å­˜: ' + name);
        hideAddAccountForm();
        addLog('success', 'ç³»ç»Ÿ', 'è´¦å·ç®¡ç†', `âœ… æ–°è´¦å·å·²æ·»åŠ : ${name}`);
    }

    // æ·»åŠ ä¿¡å·é‡
    function addSignal(containerId) {
        const container = document.getElementById(containerId);
        const signalId = `signal-${containerId}-${++signalCounters[containerId]}`;

        const newSignal = document.createElement('div');
        newSignal.className = 'signal-item';
        newSignal.id = signalId;
        newSignal.innerHTML = `
                <div class="signal-header">
                    <span class="signal-number">ä¿¡å· #${signalCounters[containerId]}</span>
                    <button class="btn btn-small btn-danger" onclick="this.closest('.signal-item').remove()">åˆ é™¤</button>
                </div>
                <div class="signal-row">
                    <div class="signal-field">
                        <span class="field-label">æŠ€æœ¯æŒ‡æ ‡</span>
                        <select class="form-select indicator-select" onchange="updateSignalFields('${signalId}', this.value)">
                            <option value="">è¯·é€‰æ‹©æŒ‡æ ‡</option>
                            <option value="sar">SAR (æŠ›ç‰©çº¿)</option>
                            <option value="period-high">å‘¨æœŸå†…æœ€é«˜ç‚¹</option>
                            <option value="period-low">å‘¨æœŸå†…æœ€ä½ç‚¹</option>
                            <option value="macd">MACD</option>
                            <option value="rsi">RSI (ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡)</option>
                            <option value="ma">ç§»åŠ¨å¹³å‡çº¿ (MA)</option>
                            <option value="bollinger">å¸ƒæ—å¸¦</option>
                            <option value="kdj">KDJ æŒ‡æ ‡</option>
                        </select>
                    </div>
                </div>
                <div class="signal-params" id="${signalId}-params">
                    <p style="text-align: center; color: #7f8c8d; padding: 20px;">è¯·å…ˆé€‰æ‹©æŠ€æœ¯æŒ‡æ ‡</p>
                </div>
            `;

        container.appendChild(newSignal);
    }

    // æ›´æ–°ä¿¡å·é‡å­—æ®µ
    function updateSignalFields(signalId, indicatorType) {
        const paramsContainer = document.getElementById(`${signalId}-params`);

        if (!indicatorType || !signalTemplates[indicatorType]) {
            paramsContainer.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 20px;">è¯·å…ˆé€‰æ‹©æŠ€æœ¯æŒ‡æ ‡</p>';
            return;
        }

        const template = signalTemplates[indicatorType];
        let html = '';

        for (let i = 0; i < template.fields.length; i += 2) {
            html += '<div class="signal-row">';

            for (let j = i; j < Math.min(i + 2, template.fields.length); j++) {
                const field = template.fields[j];
                html += '<div class="signal-field">';
                html += `<span class="field-label">${field.label}</span>`;

                if (field.type === 'select') {
                    html += '<select class="form-select">';
                    field.options.forEach(opt => {
                        html += `<option>${opt}</option>`;
                    });
                    html += '</select>';
                } else if (field.type === 'number-unit') {
                    html += '<div class="input-group">';
                    html += `<input type="number" class="form-input" placeholder="${field.placeholder}" min="1">`;
                    html += `<span class="input-addon">${field.unit}</span>`;
                    html += '</div>';
                } else if (field.type === 'number') {
                    const attrs = `
                            placeholder="${field.placeholder || ''}"
                            ${field.step ? `step="${field.step}"` : ''}
                            ${field.min ? `min="${field.min}"` : ''}
                            ${field.max ? `max="${field.max}"` : ''}
                        `;
                    html += `<input type="number" class="form-input" ${attrs}>`;
                }

                html += '</div>';
            }

            html += '</div>';
        }

        paramsContainer.innerHTML = html;
    }

    // æ›´æ–°ä»“ä½å‚æ•°
    function updatePositionParams(type) {
        const selectId = `${type}PositionFormula`;
        const paramsId = `${type}PositionParams`;
        const formula = document.getElementById(selectId).value;
        const container = document.getElementById(paramsId);

        let html = '<label class="form-label">ä»“ä½å‚æ•°</label>';

        switch(formula) {
            case 'kelly':
                html += `
                        <div class="signal-row">
                            <div class="signal-field">
                                <span class="field-label">èƒœç‡ (0-1)</span>
                                <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 0.6" step="0.01" min="0" max="1">
                            </div>
                            <div class="signal-field">
                                <span class="field-label">ç›ˆäºæ¯”</span>
                                <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 2" step="0.1" min="0">
                            </div>
                        </div>
                    `;
                break;
            case 'fixed-ratio':
                html += `
                        <div class="signal-row">
                            <div class="signal-field">
                                <span class="field-label">ä»“ä½æ¯”ä¾‹ (%)</span>
                                <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 10" min="0" max="100">
                            </div>
                        </div>
                    `;
                break;
            case 'fixed-amount':
                html += `
                        <div class="signal-row">
                            <div class="signal-field">
                                <span class="field-label">å›ºå®šé‡‘é¢ (USDT)</span>
                                <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 1000" min="0">
                            </div>
                        </div>
                    `;
                break;
            case 'atr':
                html += `
                        <div class="signal-row">
                            <div class="signal-field">
                                <span class="field-label">ATR å‘¨æœŸ</span>
                                <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 14" min="1">
                            </div>
                            <div class="signal-field">
                                <span class="field-label">é£é™©å€æ•°</span>
                                <input type="number" class="form-input" placeholder="ä¾‹å¦‚: 2" step="0.1" min="0">
                            </div>
                        </div>
                    `;
                break;
        }

        container.innerHTML = html;
    }

    // æ¨¡æ‹Ÿç­–ç•¥è§¦å‘
    function simulateStrategyTrigger(strategyName, type, accountName) {
        const typeText = type === 'attack' ? 'è¿›æ”»' : 'é˜²å®ˆ';
        const coin = strategyName.includes('BTC') ? 'BTC' : 'ETH';
        const direction = Math.random() > 0.5 ? 'long' : 'short';
        const directionText = direction === 'long' ? 'å¼€å¤š' : 'å¼€ç©º';
        const directionClass = direction === 'long' ? 'direction-long' : 'direction-short';
        const openPrice = coin === 'BTC' ? (28000 + Math.random() * 1000).toFixed(2) : (1800 + Math.random() * 100).toFixed(2);
        const closePrice = coin === 'BTC' ?
            (parseFloat(openPrice) + (Math.random() * 1000 - 300)).toFixed(2) :
            (parseFloat(openPrice) + (Math.random() * 50 - 15)).toFixed(2);
        const amount = coin === 'BTC' ? (0.01 + Math.random() * 0.1).toFixed(3) : (1 + Math.random() * 3).toFixed(2);
        const pnl = ((parseFloat(closePrice) - parseFloat(openPrice)) * parseFloat(amount) * (direction === 'long' ? 1 : -1)).toFixed(2);
        const pnlClass = pnl > 0 ? 'pnl-profit' : 'pnl-loss';
        const pnlSign = pnl > 0 ? '+' : '';

        // æ·»åŠ å®æ—¶æ—¥å¿—
        addLog('success', accountName, strategyName, typeText, `âœ… ä¿¡å·è§¦å‘: æ‰€æœ‰æ¡ä»¶æ»¡è¶³`);

        setTimeout(() => {
            addLog('success', accountName, strategyName, typeText, `ğŸ“Š ä¸‹å•æˆåŠŸ`, [
                { label: 'äº¤æ˜“å¯¹', value: `${coin}-USDT` },
                { label: 'æ–¹å‘', value: directionText, class: directionClass },
                { label: 'æ•°é‡', value: `${amount} ${coin}` }
            ]);
        }, 1000);

        setTimeout(() => {
            addLog('success', accountName, strategyName, typeText, `ğŸ’° è®¢å•æˆäº¤`, [
                { label: 'æˆäº¤ä»·', value: `$${openPrice}` },
                { label: 'æˆäº¤é¢', value: `$${(parseFloat(openPrice) * parseFloat(amount)).toFixed(2)}` }
            ]);

            // æ·»åŠ æ‰§è¡Œè®°å½•
            addExecutionRecord(accountName, strategyName, typeText, coin, directionText, directionClass, amount, openPrice, closePrice, pnl, pnlClass, pnlSign);
        }, 2000);
    }

    // æ·»åŠ æ—¥å¿—
    function addLog(type, account, strategy, subType, message, details = []) {
        const logContainer = document.getElementById('logContainer');
        const logEntry = document.createElement('div');
        logEntry.className = `log-entry ${type}`;

        const now = new Date();
        const timeStr = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;

        let detailsHtml = '';
        if (details.length > 0) {
            detailsHtml = '<div class="log-details">';
            details.forEach(detail => {
                detailsHtml += `
                        <span class="log-detail-item">
                            <span class="log-detail-label">${detail.label}:</span>
                            <span class="${detail.class || ''}">${detail.value}</span>
                        </span>
                    `;
            });
            detailsHtml += '</div>';
        }

        logEntry.innerHTML = `
                <div class="log-time">${timeStr}</div>
                <div class="log-strategy">${account} Â· ${strategy}${subType ? ' Â· ' + subType : ''}</div>
                <div class="log-message">${message}</div>
                ${detailsHtml}
            `;

        logContainer.insertBefore(logEntry, logContainer.firstChild);
    }

    // æ·»åŠ æ‰§è¡Œè®°å½•
    function addExecutionRecord(account, strategy, type, coin, direction, directionClass, amount, openPrice, closePrice, pnl, pnlClass, pnlSign) {
        const tbody = document.getElementById('executionTableBody');
        const row = document.createElement('tr');

        const now = new Date();
        const timeStr = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;

        const remarks = [
            'SARä¸Šç©¿è§¦å‘',
            'çªç ´24Hæœ€é«˜ç‚¹',
            'æ­¢ç›ˆå¹³ä»“',
            'æ­¢æŸé€€å‡º',
            'MACDé‡‘å‰',
            'RSIè¶…ä¹°',
            'å¸ƒæ—å¸¦çªç ´'
        ];
        const randomRemark = remarks[Math.floor(Math.random() * remarks.length)];

        row.innerHTML = `
                <td>${timeStr}</td>
                <td><span class="account-badge">${account}</span></td>
                <td>${strategy}</td>
                <td>${type}</td>
                <td>${coin}-USDT</td>
                <td class="${directionClass}">${direction}</td>
                <td>${amount}</td>
                <td>$${openPrice}</td>
                <td>$${closePrice}</td>
                <td class="${pnlClass}">${pnlSign}$${pnl}</td>
                <td>${randomRemark}</td>
            `;

        tbody.insertBefore(row, tbody.firstChild);

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        updateStats(parseFloat(pnl));
    }

    // æ›´æ–°ç»Ÿè®¡æ•°æ®
    function updateStats(pnl) {
        // æ›´æ–°äº¤æ˜“æ¬¡æ•°
        const countEl = document.getElementById('totalTrades');
        countEl.textContent = parseInt(countEl.textContent) + 1;

        // æ›´æ–°ç›ˆäº
        const pnlEl = document.getElementById('totalPnl');
        const currentPnl = parseFloat(pnlEl.textContent.replace(/[+$,]/g, ''));
        const newPnl = currentPnl + pnl;
        pnlEl.textContent = (newPnl >= 0 ? '+' : '') + '$' + newPnl.toFixed(2);

        // æ›´æ–°èƒœç‡
        const rows = document.querySelectorAll('#executionTableBody tr');
        let wins = 0;
        rows.forEach(row => {
            const pnlText = row.cells[9].textContent;
            if (pnlText.startsWith('+')) wins++;
        });
        const winRate = ((wins / rows.length) * 100).toFixed(1);
        document.getElementById('winRate').textContent = winRate + '%';
    }

    // ä¿å­˜ç­–ç•¥
    function saveStrategy() {
        const account = document.getElementById('strategyAccount').value;
        alert('ç­–ç•¥é…ç½®å·²ä¿å­˜ï¼Œå…³è”è´¦å·: ' + account);
        switchPage('dashboard');
        addLog('success', 'ç³»ç»Ÿ', 'é…ç½®', '', 'ğŸ“ æ–°ç­–ç•¥å·²åˆ›å»ºå¹¶ä¿å­˜');
    }

    // ä¿å­˜è®¾ç½®
    function saveSettings() {
        alert('ç³»ç»Ÿè®¾ç½®å·²ä¿å­˜');
        addLog('success', 'ç³»ç»Ÿ', 'è®¾ç½®', '', 'âœ… ç³»ç»Ÿè®¾ç½®å·²æ›´æ–°');
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    window.addEventListener('DOMContentLoaded', function() {
        addSignal('attackSignals');
        addSignal('defenseSignals');
    });
</script>
</body>
</html>

